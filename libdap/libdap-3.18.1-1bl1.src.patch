--- origsrc/libdap-3.18.1/Makefile.am	2016-05-14 02:09:41.000000000 +0900
+++ src/libdap-3.18.1/Makefile.am	2019-06-04 20:56:20.662846100 +0900
@@ -55,7 +55,7 @@ if DAP4_DEFINED
     libdap_la_SOURCES += $(DAP4_ONLY_SRC)
 endif
 
-libdap_la_LDFLAGS = -version-info $(LIBDAP_VERSION)
+libdap_la_LDFLAGS = -no-undefined -version-info $(LIBDAP_VERSION)
 libdap_la_CPPFLAGS = $(AM_CPPFLAGS)
 libdap_la_LIBADD = $(XML2_LIBS) $(PTHREAD_LIBS) gl/libgnu.la d4_ce/libd4_ce_parser.la \
 d4_function/libd4_function_parser.la libparsers.la
@@ -65,7 +65,7 @@ if DAP4_DEFINED
 endif
 
 libdapclient_la_SOURCES = $(CLIENT_SRC) 
-libdapclient_la_LDFLAGS = -version-info $(CLIENTLIB_VERSION)
+libdapclient_la_LDFLAGS = -no-undefined -version-info $(CLIENTLIB_VERSION)
 libdapclient_la_CPPFLAGS = $(AM_CPPFLAGS) $(CURL_CFLAGS)
 libdapclient_la_LIBADD = $(CURL_LIBS) libdap.la $(PTHREAD_LIBS)
 if DAP4_DEFINED
@@ -73,7 +73,7 @@ if DAP4_DEFINED
 endif
 
 libdapserver_la_SOURCES = $(SERVER_SRC)
-libdapserver_la_LDFLAGS = -version-info $(SERVERLIB_VERSION)
+libdapserver_la_LDFLAGS = -no-undefined -version-info $(SERVERLIB_VERSION)
 libdapserver_la_LIBADD = libdap.la $(UUID_LIBS)
 
 pkginclude_HEADERS = $(DAP_HDR) $(GNU_HDR) $(CLIENT_HDR) $(SERVER_HDR) 
--- origsrc/libdap-3.18.1/conf/acinclude.m4	2015-02-03 08:37:10.000000000 +0900
+++ src/libdap-3.18.1/conf/acinclude.m4	2019-06-04 20:38:22.484629400 +0900
@@ -561,7 +561,7 @@ AC_DEFUN([DODS_CHECK_SIZES], [dnl
     # First, we need to see if the xdr routines are in libc, librpc,
     # or librpcsvc or libnsl
     dap_xdrlib=
-    AC_SEARCH_LIBS([xdr_void],[c rpc nsl rpcsvc],[
+    AC_SEARCH_LIBS([xdr_void],[c rpc nsl rpcsvc tirpc],[
       dap_xdrlib=`echo $ac_res|sed -e 's/^-l//'`],[
       AC_MSG_WARN(Cannot locate library containing xdr functions.)])
     # Added for autoconf 2.59 which appears to not use/set $ac_res. jhrg
--- origsrc/libdap-3.18.1/tests/Makefile.am	2015-10-20 07:03:35.000000000 +0900
+++ src/libdap-3.18.1/tests/Makefile.am	2019-06-04 22:01:30.093773300 +0900
@@ -36,13 +36,13 @@ check_SCRIPTS = $(DASTESTSUITE) $(DDSTES
 # Build the test drivers. The drivers all use the
 # subclassed types in Test*.cc and the TestTypesFactory.
 
-lib_LIBRARIES = libtest-types.a
+noinst_LIBRARIES = libtest-types.a
 
 libtest_types_a_SOURCES = $(TESTSRCS) $(TEST_HDR)
 libtest_types_a_CXXFLAGS = -fPIC
 
 testheadersdir = $(pkgincludedir)/test
-testheaders_HEADERS = $(TEST_HDR)
+noinst_HEADERS = $(TEST_HDR)
 
 das_test_SOURCES = das-test.cc
 das_test_LDADD =  libtest-types.a ../libdapserver.la ../libdap.la 
