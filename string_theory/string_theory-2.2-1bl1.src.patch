--- origsrc/string_theory-2.2/CMakeLists.txt	2019-06-26 01:45:27.000000000 +0900
+++ src/string_theory-2.2/CMakeLists.txt	2019-07-04 16:56:06.023556500 +0900
@@ -33,7 +33,7 @@ set(ST_VERSION ${ST_MAJOR_VERSION}.${ST_
 set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${PROJECT_SOURCE_DIR}/cmake")
 
 include(CheckCXXCompilerFlag)
-if(CMAKE_COMPILER_IS_GNUCXX OR "${CMAKE_CXX_COMPILER_ID}" MATCHES ".*Clang")
+if((CMAKE_COMPILER_IS_GNUCXX OR "${CMAKE_CXX_COMPILER_ID}" MATCHES ".*Clang") AND NOT CYGWIN)
     set(CMAKE_CXX_FLAGS "-Wall -Wextra ${CMAKE_CXX_FLAGS}")
 
     check_cxx_compiler_flag("-std=c++20" HAVE_STD_CXX20)
@@ -270,3 +270,10 @@ if(ST_BUILD_TESTS)
     enable_testing()
     add_subdirectory(test)
 endif()
+
+SET(prefix ${CMAKE_INSTALL_PREFIX})
+SET(exec_prefix ${CMAKE_INSTALL_PREFIX})
+SET(libdir ${CMAKE_INSTALL_PREFIX}/lib)
+SET(includedir ${CMAKE_INSTALL_PREFIX}/include)
+CONFIGURE_FILE(${CMAKE_SOURCE_DIR}/string_theory.pc.in ${CMAKE_BINARY_DIR}/string_theory.pc @ONLY)
+INSTALL(FILES ${CMAKE_BINARY_DIR}/string_theory.pc DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/pkgconfig)
--- origsrc/string_theory-2.2/string_theory.pc.in	1970-01-01 09:00:00.000000000 +0900
+++ src/string_theory-2.2/string_theory.pc.in	2019-07-04 16:56:13.801181400 +0900
@@ -0,0 +1,10 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: string_theory
+Description: Flexible C++11 string library with type-safe formatting
+Version: @ST_VERSION@
+Libs: -L${libdir} -lstring_theory
+Cflags: -I${includedir}
--- origsrc/string_theory-2.2/test/CMakeLists.txt	2019-06-26 01:45:27.000000000 +0900
+++ src/string_theory-2.2/test/CMakeLists.txt	2019-07-04 16:52:12.673373000 +0900
@@ -35,7 +35,9 @@ else()
     set(BUILD_SHARED_LIBS ON  CACHE INTERNAL "Override gtest default")
 endif()
 
-add_subdirectory(gtest-1.8.0 EXCLUDE_FROM_ALL)
+if (NOT CYGWIN)
+    add_subdirectory(gtest-1.8.0 EXCLUDE_FROM_ALL)
+endif()
 
 include_directories(${GTEST_INCLUDE_DIR})
 include_directories(${gtest_SOURCE_DIR}/include ${gtest_SOURCE_DIR})
