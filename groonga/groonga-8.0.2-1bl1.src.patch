diff -buprN -x CYGWIN-PATCHES -x aclocal.m4~ -x aclocal.m4t -x autom4te.cache -x config.cache -x config.guess -x config.log -x config.status -x config.sub -x '*SlackBuild*' -x '*.egg-info' -x '*.dll' -x '*.exe' -x '*.o' -x '*.gch' -x '*.gem' -x .gitignore -x '*.jpg' -x '*.png' -x '*.qm' -x '*.svgz' -x '*.tif' -x '*.class' -x '*.jlc' -x '*.pyc' -x '*.pyo' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x x86_64-pc-cygwin -x aclocal.m4 -x configure -x config.h -x '*.h.in' -x COPYING -x INSTALL -x ansi2knr.c -x ar-lib -x config-ml.in -x elisp-comp -x mdate-sh -x mkinstalldirs -x py-compile -x symlink-tree -x test-driver -x texinfo.tex -x ylwrap -x Makefile.in -x GNUmakefile.in -x makefile.in -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x lt~obsolete.m4 -x ltmain.sh -x compile -x depcomp -x install-sh -x missing -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x mate-doc-utils.make -x mate-doc-utils.m4 -x groonga-httpd.conf -x groonga-httpd-restart -x Makefile -x test origsrc/groonga-8.0.2/configure.ac src/groonga-8.0.2/configure.ac
--- origsrc/groonga-8.0.2/configure.ac	2018-04-25 16:13:55.000000000 +0900
+++ src/groonga-8.0.2/configure.ac	2018-05-18 15:28:27.736873100 +0900
@@ -1376,7 +1376,7 @@ AC_MSG_CHECKING([whether package platfor
 AC_ARG_WITH(package-platform,
   [AS_HELP_STRING([--with-package-platform=PLATFORM],
     [install package platform related files. [default=no]
-     (supported package platforms: centos, centos5, centos6, centos7, fedora)])],
+     (supported package platforms: centos, centos5, centos6, centos7, fedora, cygwin)])],
   [package_platform="$withval"],
   [package_platform="no"])
 if test "$package_platform" = "centos"; then
@@ -1395,10 +1395,13 @@ AM_CONDITIONAL([CENTOS_PLATFORM],
                [test "${package_platform}" != "no"])
 AM_CONDITIONAL([CENTOS_INIT_PLATFORM],
                [test "${package_platform}" = "centos5" ||
-                test "${package_platform}" = "centos6"])
+                test "${package_platform}" = "centos6" ||
+                test "${package_platform}" = "cygwin"])
 AM_CONDITIONAL([CENTOS_SYSTEMD_PLATFORM],
                [test "${package_platform}" = "centos7" ||
                 test "${package_platform}" = "fedora"])
+AM_CONDITIONAL([CYGWIN_INIT_PLATFORM],
+               [test "${package_platform}" = "cygwin"])
 
 # plugins check
 relative_pluginsdir_base="\$(PACKAGE)/plugins"
@@ -1526,7 +1529,7 @@ AC_ARG_ENABLE(groonga_httpd,
   [enable_groonga_httpd="yes"])
 if test "x$enable_groonga_httpd" != "xno"; then
   enable_groonga_httpd="yes"
-  AC_CONFIG_SUBDIRS([src/httpd])
+  # AC_CONFIG_SUBDIRS([src/httpd])
 else
   enable_groonga_httpd="no"
 fi
@@ -1596,7 +1599,7 @@ if test "x$with_onigmo" != "xno"; then
     AC_MSG_ERROR("No Onigmo found")
   fi
   if test "x$with_onigmo" = "xbundled" -o "$have_onigmo" = "no"; then
-    AC_CONFIG_SUBDIRS([vendor/onigmo])
+    # AC_CONFIG_SUBDIRS([vendor/onigmo])
     ONIGMO_CFLAGS="-I\$(top_srcdir)/vendor/onigmo-source"
     ONIGMO_LIBS="\$(top_builddir)/vendor/onigmo-source/libonigmo.la"
   fi
diff -buprN -x CYGWIN-PATCHES -x aclocal.m4~ -x aclocal.m4t -x autom4te.cache -x config.cache -x config.guess -x config.log -x config.status -x config.sub -x '*SlackBuild*' -x '*.egg-info' -x '*.dll' -x '*.exe' -x '*.o' -x '*.gch' -x '*.gem' -x .gitignore -x '*.jpg' -x '*.png' -x '*.qm' -x '*.svgz' -x '*.tif' -x '*.class' -x '*.jlc' -x '*.pyc' -x '*.pyo' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x x86_64-pc-cygwin -x aclocal.m4 -x configure -x config.h -x '*.h.in' -x COPYING -x INSTALL -x ansi2knr.c -x ar-lib -x config-ml.in -x elisp-comp -x mdate-sh -x mkinstalldirs -x py-compile -x symlink-tree -x test-driver -x texinfo.tex -x ylwrap -x Makefile.in -x GNUmakefile.in -x makefile.in -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x lt~obsolete.m4 -x ltmain.sh -x compile -x depcomp -x install-sh -x missing -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x mate-doc-utils.make -x mate-doc-utils.m4 -x groonga-httpd.conf -x groonga-httpd-restart -x Makefile -x test origsrc/groonga-8.0.2/data/init.d/centos/Makefile.am src/groonga-8.0.2/data/init.d/centos/Makefile.am
--- origsrc/groonga-8.0.2/data/init.d/centos/Makefile.am	2017-04-12 17:04:30.000000000 +0900
+++ src/groonga-8.0.2/data/init.d/centos/Makefile.am	2018-05-18 15:29:28.060256600 +0900
@@ -3,7 +3,11 @@ SUBDIRS = sysconfig
 scripts = groonga-server-http groonga-server-gqtp groonga-httpd
 
 if CENTOS_INIT_PLATFORM
+if CYGWIN_INIT_PLATFORM
+initdir = $(sysconfdir)/rc.d/init.d
+else
 initdir = $(sysconfdir)/init.d
+endif
 dist_init_SCRIPTS = $(scripts)
 else
 EXTRA_DIST = $(scripts)
diff -buprN -x CYGWIN-PATCHES -x aclocal.m4~ -x aclocal.m4t -x autom4te.cache -x config.cache -x config.guess -x config.log -x config.status -x config.sub -x '*SlackBuild*' -x '*.egg-info' -x '*.dll' -x '*.exe' -x '*.o' -x '*.gch' -x '*.gem' -x .gitignore -x '*.jpg' -x '*.png' -x '*.qm' -x '*.svgz' -x '*.tif' -x '*.class' -x '*.jlc' -x '*.pyc' -x '*.pyo' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x x86_64-pc-cygwin -x aclocal.m4 -x configure -x config.h -x '*.h.in' -x COPYING -x INSTALL -x ansi2knr.c -x ar-lib -x config-ml.in -x elisp-comp -x mdate-sh -x mkinstalldirs -x py-compile -x symlink-tree -x test-driver -x texinfo.tex -x ylwrap -x Makefile.in -x GNUmakefile.in -x makefile.in -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x lt~obsolete.m4 -x ltmain.sh -x compile -x depcomp -x install-sh -x missing -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x mate-doc-utils.make -x mate-doc-utils.m4 -x groonga-httpd.conf -x groonga-httpd-restart -x Makefile -x test origsrc/groonga-8.0.2/data/logrotate.d/centos/groonga-httpd src/groonga-8.0.2/data/logrotate.d/centos/groonga-httpd
--- origsrc/groonga-8.0.2/data/logrotate.d/centos/groonga-httpd	2018-04-27 17:35:28.000000000 +0900
+++ src/groonga-8.0.2/data/logrotate.d/centos/groonga-httpd	2018-05-18 15:36:26.441371700 +0900
@@ -8,7 +8,7 @@
     sharedscripts
     postrotate
         if [ -f /var/lock/subsys/groonga-httpd ]; then
-            /bin/kill -USR1 $(cat /tmp/local/var/run/groonga/groonga-httpd.pid)
+            /bin/kill -USR1 $(cat /var/run/groonga/groonga-httpd.pid)
         fi
     endscript
 }
diff -buprN -x CYGWIN-PATCHES -x aclocal.m4~ -x aclocal.m4t -x autom4te.cache -x config.cache -x config.guess -x config.log -x config.status -x config.sub -x '*SlackBuild*' -x '*.egg-info' -x '*.dll' -x '*.exe' -x '*.o' -x '*.gch' -x '*.gem' -x .gitignore -x '*.jpg' -x '*.png' -x '*.qm' -x '*.svgz' -x '*.tif' -x '*.class' -x '*.jlc' -x '*.pyc' -x '*.pyo' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x x86_64-pc-cygwin -x aclocal.m4 -x configure -x config.h -x '*.h.in' -x COPYING -x INSTALL -x ansi2knr.c -x ar-lib -x config-ml.in -x elisp-comp -x mdate-sh -x mkinstalldirs -x py-compile -x symlink-tree -x test-driver -x texinfo.tex -x ylwrap -x Makefile.in -x GNUmakefile.in -x makefile.in -x libtool.m4 -x ltoptions.m4 -x ltsugar.m4 -x ltversion.m4 -x lt~obsolete.m4 -x ltmain.sh -x compile -x depcomp -x install-sh -x missing -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x mate-doc-utils.make -x mate-doc-utils.m4 -x groonga-httpd.conf -x groonga-httpd-restart -x Makefile -x test origsrc/groonga-8.0.2/data/systemd/centos/groonga-httpd.service src/groonga-8.0.2/data/systemd/centos/groonga-httpd.service
--- origsrc/groonga-8.0.2/data/systemd/centos/groonga-httpd.service	2018-04-27 17:35:28.000000000 +0900
+++ src/groonga-8.0.2/data/systemd/centos/groonga-httpd.service	2018-05-18 15:36:27.742916300 +0900
@@ -6,12 +6,12 @@ Conflicts=groonga-server-http.service
 
 [Service]
 Type=forking
-PIDFile=/tmp/local/var/run/groonga/groonga-httpd.pid
+PIDFile=/var/run/groonga/groonga-httpd.pid
 User=root
 Group=root
 EnvironmentFile=-/etc/sysconfig/groonga-httpd
 ExecStartPre=-/usr/bin/mkdir -p /var/log/groonga/httpd
-ExecStartPre=/usr/bin/rm -f /tmp/local/var/run/groonga/groonga-httpd.pid
+ExecStartPre=/usr/bin/rm -f /var/run/groonga/groonga-httpd.pid
 ExecStartPre=/usr/sbin/groonga-httpd -t
 ExecStart=/usr/sbin/groonga-httpd
 KillMode=process
