--- origsrc/libheif-1.4.0/gdk-pixbuf/Makefile.am	2019-02-15 21:55:23.000000000 +0900
+++ src/libheif-1.4.0/gdk-pixbuf/Makefile.am	2019-04-02 07:05:10.036845000 +0900
@@ -8,6 +8,7 @@ libpixbufloader_heif_la_DEPENDENCIES = .
 libpixbufloader_heif_la_CFLAGS = -I$(top_srcdir) -I$(top_builddir) $(gdkpixbuf_CFLAGS)
 libpixbufloader_heif_la_LIBADD = ../libheif/libheif.la $(gdkpixbuf_LIBS)
 libpixbufloader_heif_la_SOURCES = pixbufloader-heif.c
+libpixbufloader_heif_la_LDFLAGS = -no-undefined -avoid-version -module
 endif
 
 EXTRA_DIST = CMakeLists.txt
--- origsrc/libheif-1.4.0/libheif/Makefile.am	2019-02-26 20:33:24.000000000 +0900
+++ src/libheif-1.4.0/libheif/Makefile.am	2019-04-02 06:51:31.036995500 +0900
@@ -29,9 +29,7 @@ libheif_la_CXXFLAGS = \
 libheif_la_LIBADD = $(ADDITIONAL_LIBS)
 
 libheif_la_LDFLAGS = -version-info $(LIBHEIF_CURRENT):$(LIBHEIF_REVISION):$(LIBHEIF_AGE)
-if MINGW
 libheif_la_LDFLAGS += -no-undefined
-endif
 
 libheif_la_SOURCES = \
   bitstream.h \
